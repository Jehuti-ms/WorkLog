<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorkLog - Tutor Management System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Main App Container -->
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">üìö</span>
                    <span class="logo-text">WorkLog</span>
                </div>
                <p class="app-subtitle">Tutor Management System</p>
            </div>
            
            <ul class="nav-menu">
                <li class="nav-item">
                    <button class="tab active" data-tab="students">
                        <span class="tab-icon">üë•</span>
                        <span class="tab-text">Students</span>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="tab" data-tab="hours">
                        <span class="tab-icon">‚è±Ô∏è</span>
                        <span class="tab-text">Hours</span>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="tab" data-tab="marks">
                        <span class="tab-icon">üìù</span>
                        <span class="tab-text">Marks</span>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="tab" data-tab="attendance">
                        <span class="tab-icon">üìÖ</span>
                        <span class="tab-text">Attendance</span>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="tab" data-tab="payments">
                        <span class="tab-icon">üí∞</span>
                        <span class="tab-text">Payments</span>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="tab" data-tab="reports">
                        <span class="tab-icon">üìä</span>
                        <span class="tab-text">Reports</span>
                    </button>
                </li>
                <li class="nav-item">
                    <button class="tab" data-tab="settings">
                        <span class="tab-icon">‚öôÔ∏è</span>
                        <span class="tab-text">Settings</span>
                    </button>
                </li>
            </ul>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- App Header -->
            <header class="app-header">
                <div class="header-left">
                    <h1 id="currentTabTitle">Students Management</h1>
                    <div class="stats-bar">
                        <span class="stat-item">
                            <span id="dataStatus">üìä Data: 0 Students, 0 Sessions</span>
                        </span>
                        <span class="stat-item">
                            <span id="lastSessionBadge">Last Session: Never</span>
                        </span>
                    </div>
                </div>
                <div class="user-info">
                    <span id="userDisplay">Welcome, User!</span>
                </div>
            </header>

            <!-- Tab Contents -->
            <div class="tab-content-container">
                <!-- Students Tab -->
                <div id="students" class="tab-content active">
                    <div class="section-card">
                        <div class="section-header">
                            <h2 class="section-title">Student Management</h2>
                            <div class="stats-mini">
                                <span id="studentsCount">0</span> Students ‚Ä¢ 
                                Avg Rate: $<span id="avgRate">0.00</span>
                            </div>
                        </div>

                        <!-- Student Form -->
                        <form id="studentForm" class="student-form">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="studentName" class="form-label">Student Name *</label>
                                    <input type="text" id="studentName" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="studentId" class="form-label">Student ID *</label>
                                    <input type="text" id="studentId" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="studentGender" class="form-label">Gender</label>
                                    <select id="studentGender" class="form-control">
                                        <option value="">Select Gender</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="studentBaseRate" class="form-label">Base Rate ($/session)</label>
                                    <input type="number" id="studentBaseRate" class="form-control" step="0.01" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="studentEmail" class="form-label">Email</label>
                                    <input type="email" id="studentEmail" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label for="studentPhone" class="form-label">Phone</label>
                                    <input type="tel" id="studentPhone" class="form-control">
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn btn-primary" onclick="addStudent()">
                                    ‚ûï Add Student
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="useDefaultRate()">
                                    üí∞ Use Default Rate
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Student Search -->
                    <div class="section-card">
                        <div class="section-header">
                            <h3 class="section-title">Student Directory</h3>
                            <div class="search-box">
                                <input type="text" id="studentSearch" class="form-control search-input" 
                                       placeholder="Search students...">
                                <button type="button" id="clearSearch" class="btn btn-sm btn-secondary" 
                                        style="display: none;">Clear</button>
                            </div>
                        </div>
                        <div id="studentsContainer" class="students-container">
                            <!-- Student cards will be rendered here -->
                        </div>
                    </div>
                </div>

                <!-- Hours Tab -->
                <div id="hours" class="tab-content">
                    <div class="section-card">
                        <div class="section-header">
                            <h2 class="section-title">Hours & Earnings Tracking</h2>
                            <div class="stats-mini">
                                <span id="weeklyHours">0</span>h this week ‚Ä¢ 
                                $<span id="weeklyTotal">0.00</span> earned
                            </div>
                        </div>

                        <!-- Hours Stats -->
                        <div class="stats-grid">
                            <div class="stat-card">
                                <span class="stat-value" id="weeklyHours">0.0</span>
                                <div class="stat-label">Weekly Hours</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-value" id="weeklyTotal">$0.00</span>
                                <div class="stat-label">Weekly Total</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-value" id="monthlyHours">0.0</span>
                                <div class="stat-label">Monthly Hours</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-value" id="monthlyTotal">$0.00</span>
                                <div class="stat-label">Monthly Total</div>
                            </div>
                        </div>

                        <!-- Hours Form -->
                        <form id="hoursForm" class="hours-form">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="organization" class="form-label">Organization *</label>
                                    <input type="text" id="organization" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="workType" class="form-label">Work Type</label>
                                    <select id="workType" class="form-control">
                                        <option value="hourly">Hourly</option>
                                        <option value="session">Session</option>
                                        <option value="project">Project</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="subject" class="form-label">Subject</label>
                                    <input type="text" id="subject" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label for="topic" class="form-label">Topic</label>
                                    <input type="text" id="topic" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label for="workDate" class="form-label">Date *</label>
                                    <input type="date" id="workDate" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="hoursWorked" class="form-label">Hours Worked *</label>
                                    <input type="number" id="hoursWorked" class="form-control" step="0.5" min="0" required>
                                </div>
                                <div class="form-group">
                                    <label for="baseRate" class="form-label">Rate ($/hour) *</label>
                                    <input type="number" id="baseRate" class="form-control" step="0.01" min="0" required>
                                </div>
                                <div class="form-group">
                                    <label for="totalPay" class="form-label">Total Pay</label>
                                    <input type="text" id="totalPay" class="form-control" readonly>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="workNotes" class="form-label">Notes</label>
                                <textarea id="workNotes" class="form-control" rows="3"></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn btn-primary" onclick="logHours()">
                                    üíæ Log Work & Earnings
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Hours History -->
                    <div class="section-card">
                        <div class="section-header">
                            <h3 class="section-title">Recent Entries</h3>
                        </div>
                        <div id="hoursContainer" class="hours-container">
                            <!-- Hours entries will be rendered here -->
                        </div>
                    </div>
                </div>

                <!-- Marks Tab -->
                <div id="marks" class="tab-content">
                    <div class="section-card">
                        <div class="section-header">
                            <h2 class="section-title">Student Assessments</h2>
                            <div class="stats-mini">
                                <span id="marksCount">0</span> Marks ‚Ä¢ 
                                Avg: <span id="avgMarks">0</span>%
                            </div>
                        </div>

                        <!-- Marks Form -->
                        <form id="marksForm" class="marks-form">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="marksStudent" class="form-label">Student *</label>
                                    <select id="marksStudent" class="form-control" required>
                                        <option value="">Select student...</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="markSubject" class="form-label">Subject *</label>
                                    <input type="text" id="markSubject" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="markTopic" class="form-label">Topic</label>
                                    <input type="text" id="markTopic" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label for="markDate" class="form-label">Date *</label>
                                    <input type="date" id="markDate" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="score" class="form-label">Score *</label>
                                    <input type="number" id="score" class="form-control" step="0.1" min="0" required>
                                </div>
                                <div class="form-group">
                                    <label for="maxScore" class="form-label">Max Score *</label>
                                    <input type="number" id="maxScore" class="form-control" step="0.1" min="1" required>
                                </div>
                                <div class="form-group">
                                    <label for="percentage" class="form-label">Percentage</label>
                                    <input type="text" id="percentage" class="form-control" readonly>
                                </div>
                                <div class="form-group">
                                    <label for="grade" class="form-label">Grade</label>
                                    <input type="text" id="grade" class="form-control" readonly>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="markComments" class="form-label">Comments</label>
                                <textarea id="markComments" class="form-control" rows="3"></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn btn-primary" onclick="addMark()">
                                    üìù Add Mark
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Marks History -->
                    <div class="section-card">
                        <div class="section-header">
                            <h3 class="section-title">Recent Assessments</h3>
                        </div>
                        <div id="marksContainer" class="marks-container">
                            <!-- Marks will be rendered here -->
                        </div>
                    </div>
                </div>

                <!-- Attendance Tab -->
                <div id="attendance" class="tab-content">
                    <div class="section-card">
                        <div class="section-header">
                            <h2 class="section-title">Attendance Tracking</h2>
                            <div class="stats-mini">
                                <span id="attendanceCount">0</span> Sessions ‚Ä¢ 
                                Last: <span id="lastSessionDate">Never</span>
                            </div>
                        </div>

                        <!-- Attendance Form -->
                        <form id="attendanceForm" class="attendance-form">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="attendanceDate" class="form-label">Date *</label>
                                    <input type="date" id="attendanceDate" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="attendanceSubject" class="form-label">Subject *</label>
                                    <input type="text" id="attendanceSubject" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="attendanceTopic" class="form-label">Topic</label>
                                    <input type="text" id="attendanceTopic" class="form-control">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Present Students *</label>
                                <div class="attendance-controls">
                                    <button type="button" class="btn btn-sm btn-secondary select-all-students-btn" 
                                            onclick="selectAllStudents()">
                                        ‚úÖ Select All
                                    </button>
                                    <button type="button" class="btn btn-sm btn-secondary deselect-all-students-btn" 
                                            onclick="deselectAllStudents()">
                                        ‚ùå Deselect All
                                    </button>
                                </div>
                                <div id="attendanceList" class="attendance-list">
                                    <!-- Student checkboxes will be rendered here -->
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" class="btn btn-primary" onclick="saveAttendance()">
                                    üíæ Save Attendance
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="setTodayDate()">
                                    üìÖ Today
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="setYesterdayDate()">
                                    üìÖ Yesterday
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Attendance History -->
                    <div class="section-card">
                        <div class="section-header">
                            <h3 class="section-title">Attendance History</h3>
                        </div>
                        <div id="attendanceContainer" class="attendance-container">
                            <!-- Attendance records will be rendered here -->
                        </div>
                    </div>
                </div>

                <!-- Payments Tab -->
                <div id="payments" class="tab-content">
                    <div class="section-card">
                        <div class="section-header">
                            <h2 class="section-title">Payment Management</h2>
                            <div class="stats-mini">
                                <span id="totalStudentsCount">0</span> Students ‚Ä¢ 
                                Owed: $<span id="totalOwed">0.00</span>
                            </div>
                        </div>

                        <!-- Payment Stats -->
                        <div class="stats-grid">
                            <div class="stat-card">
                                <span class="stat-value" id="totalStudentsCount">0</span>
                                <div class="stat-label">Total Students</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-value" id="totalOwed">$0.00</span>
                                <div class="stat-label">Total Owed</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-value" id="monthlyPayments">$0.00</span>
                                <div class="stat-label">This Month</div>
                            </div>
                        </div>

                        <!-- Payment Form -->
                        <form id="paymentForm" class="payment-form">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="paymentStudent" class="form-label">Student *</label>
                                    <select id="paymentStudent" class="form-control" required>
                                        <option value="">Select student...</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="paymentAmount" class="form-label">Amount ($) *</label>
                                    <input type="number" id="paymentAmount" class="form-control" step="0.01" min="0" required>
                                </div>
                                <div class="form-group">
                                    <label for="paymentDate" class="form-label">Date *</label>
                                    <input type="date" id="paymentDate" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="paymentMethod" class="form-label">Payment Method</label>
                                    <select id="paymentMethod" class="form-control">
                                        <option value="Cash">Cash</option>
                                        <option value="Credit Card">Credit Card</option>
                                        <option value="Bank Transfer">Bank Transfer</option>
                                        <option value="Online">Online</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="paymentNotes" class="form-label">Notes</label>
                                <textarea id="paymentNotes" class="form-control" rows="3"></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn btn-primary" onclick="recordPayment()">
                                    üí∞ Record Payment
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Payment History -->
                    <div class="section-card">
                        <div class="section-header">
                            <h3 class="section-title">Payment Activity</h3>
                        </div>
                        <div id="paymentActivityLog" class="payment-container">
                            <!-- Payment records will be rendered here -->
                        </div>
                    </div>
                </div>

                <!-- Reports Tab -->
                <div id="reports" class="tab-content">
                    <div class="section-card">
                        <div class="section-header">
                            <h2 class="section-title">Analytics & Reports</h2>
                        </div>

                        <!-- Report Stats -->
                        <div class="stats-grid">
                            <div class="stat-card">
                                <span class="stat-value" id="totalStudentsReport">0</span>
                                <div class="stat-label">Total Students</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-value" id="totalHoursReport">0.0</span>
                                <div class="stat-label">Total Hours</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-value" id="totalEarningsReport">$0.00</span>
                                <div class="stat-label">Total Earnings</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-value" id="avgMarkReport">0%</span>
                                <div class="stat-label">Avg Mark</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-value" id="totalPaymentsReport">$0.00</span>
                                <div class="stat-label">Total Payments</div>
                            </div>
                        </div>

                        <!-- Report Navigation -->
                        <div class="button-group">
                            <button class="btn-report active" onclick="showMonthlyBreakdown()">
                                üìà Monthly
                            </button>
                            <button class="btn-report" onclick="showWeeklyBreakdown()">
                                üìÖ Weekly
                            </button>
                            <button class="btn-report" onclick="showBiWeeklyBreakdown()">
                                üìÜ Bi-Weekly
                            </button>
                            <button class="btn-report" onclick="showSubjectBreakdown()">
                                üìö Subject
                            </button>
                        </div>
                    </div>

                    <!-- Report Content -->
                    <div class="section-card">
                        <div id="breakdownContainer" class="breakdown-container">
                            <!-- Reports will be rendered here -->
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="settings" class="tab-content">
                    <div class="section-card">
                        <div class="section-header">
                            <h2 class="section-title">Application Settings</h2>
                        </div>

                        <!-- Default Rate Settings -->
                        <div class="settings-group">
                            <h3 class="settings-title">üí∞ Default Rate Settings</h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="defaultBaseRate" class="form-label">Default Base Rate ($/session)</label>
                                    <input type="number" id="defaultBaseRate" class="form-control" step="0.01" min="0">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Current Default Rate</label>
                                    <div class="current-rate-display">
                                        $<span id="currentDefaultRate">25.00</span>/session
                                    </div>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn btn-primary" onclick="saveDefaultRate()">
                                    üíæ Save Default Rate
                                </button>
                            </div>
                        </div>

                        <!-- Sync Settings -->
                        <div class="settings-group">
                            <h3 class="settings-title">‚òÅÔ∏è Cloud Sync</h3>
                            <div class="sync-controls">
                                <button class="btn btn-success" onclick="manualSync()" id="manualSyncBtn">
                                    üîÑ Sync Now
                                </button>
                                <button class="btn btn-warning" onclick="toggleSync()" id="toggleSyncBtn">
                                    ‚è∏Ô∏è Pause Sync
                                </button>
                                <span id="syncStatus" class="sync-status">
                                    ‚úÖ Sync Active
                                </span>
                            </div>
                        </div>

                        <!-- Data Management -->
                        <div class="settings-group">
                            <h3 class="settings-title">üóÉÔ∏è Data Management</h3>
                            <div class="data-actions">
                                <button class="btn btn-secondary" onclick="exportData()">
                                    üì§ Export Data
                                </button>
                                <button class="btn btn-secondary" onclick="importData()">
                                    üì• Import Data
                                </button>
                                <button class="btn btn-danger" onclick="resetData()">
                                    üóëÔ∏è Reset All Data
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript Files -->
    <script src="auth.js"></script>
    <script src="cloud-sync.js"></script>
    <script src="app.js"></script>
</body>
</html>
